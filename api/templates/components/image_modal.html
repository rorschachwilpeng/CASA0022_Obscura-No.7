<!-- Obscura No.7 - Reusable Image Modal Component -->
<!-- Usage: {% include 'components/image_modal.html' %} -->

<div class="image-modal" 
     id="imageModal" 
     aria-hidden="true" 
     role="dialog" 
     aria-labelledby="modal-title" 
     aria-describedby="modal-description">
    
    <!-- Modal Backdrop -->
    <div class="modal-backdrop" aria-hidden="true"></div>
    
    <!-- Telescope Container -->
    <div class="telescope-container">
        <!-- Decorative Gears -->
        <div class="gear-decoration gear-top-left" aria-hidden="true">‚öôÔ∏è</div>
        <div class="gear-decoration gear-top-right" aria-hidden="true">‚öôÔ∏è</div>
        <div class="gear-decoration gear-bottom-left" aria-hidden="true">‚öôÔ∏è</div>
        <div class="gear-decoration gear-bottom-right" aria-hidden="true">‚öôÔ∏è</div>
        
        <!-- Telescope Frame -->
        <div class="telescope-frame">
            <div class="telescope-lens">
                <!-- Image Container -->
                <div class="image-container">
                    <img class="modal-image" 
                         id="modalImage" 
                         alt=""
                         tabindex="0"
                         role="img">
                    
                    <!-- Loading State -->
                    <div class="image-loading" id="imageLoading" aria-live="polite">
                        <div class="brass-spinner">
                            <div class="gear-spinner" aria-hidden="true">‚öôÔ∏è</div>
                        </div>
                        <p>Loading temporal vision...</p>
                    </div>
                </div>
                
                <!-- Info Panel -->
                <div class="info-panel">
                    <!-- Modal Title -->
                    <h2 class="image-title" id="modal-title">Temporal Vision</h2>
                    
                    <!-- Prediction Summary Grid -->
                    <div class="prediction-summary">
                        <div class="summary-grid" id="predictionSummary">
                            <!-- Summary items will be populated dynamically -->
                            <div class="summary-item" data-type="environment">
                                <span class="summary-icon" aria-hidden="true">üåø</span>
                                <span class="summary-label">Environment</span>
                                <span class="summary-value" id="summaryEnvironment">-</span>
                            </div>
                            
                            <div class="summary-item" data-type="confidence">
                                <span class="summary-icon" aria-hidden="true">üìä</span>
                                <span class="summary-label">Confidence</span>
                                <span class="summary-value" id="summaryConfidence">-</span>
                            </div>
                            
                            <div class="summary-item" data-type="climate">
                                <span class="summary-icon" aria-hidden="true">üå°Ô∏è</span>
                                <span class="summary-label">Climate</span>
                                <span class="summary-value" id="summaryClimate">-</span>
                            </div>
                            
                            <div class="summary-item" data-type="location">
                                <span class="summary-icon" aria-hidden="true">üìç</span>
                                <span class="summary-label">Location</span>
                                <span class="summary-value" id="summaryLocation">-</span>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Time Information -->
                    <div class="time-info" id="timeInfo">
                        <strong>Temporal Coordinates:</strong> 
                        <span id="imageTimestamp">Loading...</span>
                        <br>
                        <strong>Prediction ID:</strong> 
                        <span id="imagePredictionId">-</span>
                    </div>
                    
                    <!-- Description Section -->
                    <div class="description-section">
                        <h3>Vision Analysis</h3>
                        <div class="image-description" id="modal-description">
                            Loading comprehensive analysis of the temporal vision...
                        </div>
                    </div>
                    
                    <!-- Modal Actions -->
                    <div class="modal-actions">
                        <a href="#" 
                           class="detail-button" 
                           id="detailButton" 
                           role="button"
                           aria-label="View detailed analysis">
                            <span class="button-icon" aria-hidden="true">üîç</span>
                            <span>Detailed Analysis</span>
                        </a>
                        
                        <button class="download-button" 
                                id="downloadButton" 
                                type="button"
                                aria-label="Download image">
                            <span class="button-icon" aria-hidden="true">üíæ</span>
                            <span>Download Image</span>
                        </button>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Modal Controls -->
        <button class="modal-close" 
                id="modalClose" 
                type="button"
                aria-label="Close modal"
                title="Close (ESC)">
            ‚úï
        </button>
        
        <button class="modal-nav modal-prev" 
                id="modalPrev" 
                type="button"
                aria-label="Previous image"
                title="Previous (Left Arrow)">
            ‚Äπ
        </button>
        
        <button class="modal-nav modal-next" 
                id="modalNext" 
                type="button"
                aria-label="Next image"
                title="Next (Right Arrow)">
            ‚Ä∫
        </button>
    </div>
    
    <!-- Loading Overlay -->
    <div class="modal-loading" id="modalLoading" aria-hidden="true">
        <div class="loading-content">
            <div class="brass-spinner">
                <div class="gear-spinner" aria-hidden="true">‚öôÔ∏è</div>
            </div>
            <p>Analyzing temporal data...</p>
        </div>
    </div>
</div>

<!-- Modal Keyboard Navigation Hints (Screen Reader Only) -->
<div class="sr-only" id="modalKeyboardHints">
    <h3>Modal Keyboard Navigation</h3>
    <ul>
        <li>ESC - Close modal</li>
        <li>Left/Right Arrow - Navigate between images</li>
        <li>Tab - Navigate modal controls</li>
        <li>Enter/Space - Activate buttons</li>
    </ul>
</div>
